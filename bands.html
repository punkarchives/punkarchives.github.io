<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1000, user-scalable=yes">
    <title>Punk Archives</title>
    <style>
        /* Global Styles */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #000000;
            color: #ffffff;
        }

        /* Main flex container */
        .main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-left: 150px; /* Matches sidebar width */
            padding-right: 150px; /* Matches sidebar width */
            padding: 20px;
        }

        /* Left Sidebar */
        .sidebar {
            width: 150px;
            background-color: #121212;
            color: #fff;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding: 20px 5px;
            box-sizing: border-box;
            border-right: 2px solid #660000;
        }

        .sidebar h1 {
            font-family: 'MyCustomFont2', sans-serif;
            color: #660000;
            font-size: 20px;
            text-transform: uppercase;
            margin-bottom: 20px;
            text-align: right;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 15px 0;
        }

        .sidebar ul li a {
            color: #ffffff;
            text-decoration: none;
            font-size: 20px;
            display: block;
            text-align: right;
            padding: 5px;
            transition: background-color 0.2s ease-in-out;
        }

        .sidebar ul li a:hover {
            background-color: #660000;
        }

        /* Right Sidebar */
        .sidebar2 {
            width: 150px;
            background-color: #121212;
            color: #fff;
            height: 100vh;
            position: fixed;
            right: 0;
            top: 0;
            padding: 20px 5px;
            box-sizing: border-box;
            border-left: 2px solid #660000;
        }

        .sidebar2 h1 {
            font-family: 'MyCustomFont2', sans-serif;
            color: #660000;
            font-size: 20px;
            text-transform: uppercase;
            margin-bottom: 20px;
            text-align: left;
        }

        .sidebar2 ul {
            list-style: none;
            padding: 0;
        }

        .sidebar2 ul li {
            margin: 15px 0;
        }

        .sidebar2 ul li a {
            color: #ffffff;
            text-decoration: none;
            font-size: 20px;
            display: block;
            text-align: left;
            padding: 5px;
            transition: background-color 0.2s ease-in-out;
        }

        .sidebar2 ul li a:hover {
            background-color: #660000;
        }

        /* Main Content */
        .content {
            width: 100%;
            max-width: 70%;
            padding: 20px;
        }

        /* Headings */
        .content h1 {
            font-family: 'MyCustomFont2', sans-serif;
            color: #660000;
            font-size: 22px;
            text-transform: uppercase;
            border-bottom: 3px solid #660000;
            padding-bottom: 10px;
        }

        .content h2 {
            font-size: 20px;
            border-bottom: 2px solid #ffffff;
            padding-bottom: 10px;
            color: #660000;
        }

        /* News Items */
        .news-item h3 {
            font-size: 18px;
            color: #660000;
            margin: 10px 0;
        }

        .news-item p {
            line-height: 1.6;
            font-size: 16px;
        }

        /* Custom Fonts */
        @font-face {
            font-family: 'MyCustomFont';
            src: url('Modest.woff') format('woff');
        }
        @font-face {
            font-family: 'MyCustomFont2';
            src: url('Crass.ttf') format('truetype');
        }

        /* Latest Additions Box */
        .latest-additions {
            background-color: #121212;
            border: 2px solid #660000;
            width: 125px;
            color: #ffffff;
        }

        .latest-additions h2 {
            font-size: 18px;
            color: #660000;
        }

        .latest-additions ul {
            list-style: none;
            padding: 0;
            font-size: 14px;
        }

        .latest-additions ul li {
        }
    </style>
</head>
<body>

    <!-- Left Sidebar -->
    <div class="sidebar">
        <h1>Punk Archives</h1>
        <ul>
            <li><a href="index.html#"><font face="MyCustomFont">Home</a></li>
            <li><a href="bands.html#">All Bands</a></li>
            <li><a href="info.html#">Add Info</a></li>
            <li><a href="https://discordapp.com/users/767006494595350578">Contact</a></li>
        <ul>
            <li><a id="randomBandButton">Random Band</font></a></li>
        </ul>
        </ul>
    </div>

<!-- Right Sidebar -->
<div class="sidebar2">
    <div class="search-container">
        <input type="text" id="searchBar" placeholder="Search..." oninput="searchBands()">
        <ul id="searchResults" style="list-style: none; padding: 0; display: none; background: #121212; border: 1px solid #660000; position: absolute; width: 140px; max-height: 200px; overflow-y: auto;"></ul>
    </div><br>
        <center><div class="latest-additions">
            <h2>Latest Additions</h2>
            <ul>
                <a href="band.html?band=The%20Great%20Redneck%20Hope"><u><font color="#ffffff">The Great Redneck Hope</font></u></a><br><br>
                <a href="band.html?band=Black%20Flag"><u><font color="#ffffff">Black Flag</font></u></a><br><br>
                <a href="band.html?band=Insect%20Warfare"><u><font color="#ffffff">Insect Warfare</font></u></a><br><br>
            </ul>
        </div></center>
<br>
        <center><div class="latest-additions">
            <h2>Latest Updates</h2>
            <ul>
            </ul>
        </div></center>
</div>

<script>
const DEBUG = true; // Set to true for debugging

function searchBands() {
    const query = document.getElementById("searchBar").value.toLowerCase();
    const resultsList = document.getElementById("searchResults");

    if (query.length === 0) {
        resultsList.style.display = "none";
        return;
    }

    fetch("banddata.json")
        .then(response => response.json())
        .then(bands => {
            resultsList.innerHTML = "";
            let matches = [];

            bands.forEach(band => {
                let matchText = "";
                let priority = Infinity; // Lower is better

                function updatePriority(field, text) {
                    if (typeof field === "string") {
                        let pos = field.toLowerCase().indexOf(query);
                        if (pos !== -1 && pos < priority) {
                            priority = pos;
                            matchText = text;
                        }
                    }
                }

                updatePriority(band.band_name, `Band Name: ${band.band_name}`);
                updatePriority(band.location, `Location: ${band.location}`);

                if (Array.isArray(band.genre)) {
                    for (let g of band.genre) {
                        updatePriority(g, `Genre: ${band.genre.join(", ")}`);
                    }
                }

                if (Array.isArray(band.releases)) {
    for (let release of band.releases) {
        if (release.title) updatePriority(release.title, `Release: ${release.title}`);
        if (release.label) updatePriority(release.label, `Label: ${release.label}`);
    }
}

                if (priority !== Infinity) {
                    matches.push({ band, matchText, priority });
                }
            });

            // **Sort by priority (lower index appears first)**
            matches.sort((a, b) => a.priority - b.priority);

            if (matches.length === 0) {
                resultsList.innerHTML = "<li style='color: #888; padding: 5px;'>No results</li>";
            } else {
                matches.forEach(({ band, matchText }) => {
                    let li = document.createElement("li");
                    li.style.padding = "5px";
                    li.style.cursor = "pointer";
                    li.style.color = "#ffffff";

                    li.innerHTML = `<strong>Band:</strong> ${band.band_name}`;
                    if (matchText) {
                        li.innerHTML += `<br><span style="color: #888; font-size: 14px;">${matchText}</span>`;
                    }

                    li.onclick = function() {
                        window.location.href = `band.html?band=${encodeURIComponent(band.band_name)}`;
                    };

                    resultsList.appendChild(li);
                });
            }

            resultsList.style.display = "block";
        })
        .catch(error => console.error("Error loading band data:", error));
}
</script>

    <!-- Main Container -->
    <div class="main-container">

    </div>

<style>
    /* Styling for the floating album cover */
    #album-cover {
        display: none;
        position: absolute;
        width: 200px;
        height: auto;
        border: 2px solid white;
        background: black;
        padding: 5px;
        z-index: 1000;
        pointer-events: none; /* Prevents interference with mouse movement */
    }
</style>

<style>
    /* Table for release details */
    .release-details {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 10px;
    }
    .release-details td {
        border: 1px solid white;
        padding: 5px;
        font-size: 14px;
    }
</style>
<div class="main-container">
        <div class="content">
            <h1>All Bands</h1>
<div id="letterNav" style="text-align: center; margin-bottom: 20px;">
    <!-- A-Z Navigation Buttons -->
    <script>
        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
        document.write('<div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 5px;">');
        letters.forEach(letter => {
            document.write(`<button onclick="scrollToLetter('${letter}')" style="background-color: #660000; color: white; border: none; padding: 5px 10px; cursor: pointer;">${letter}</button>`);
        });
        document.write('</div>');
    </script>
</div>
            <ul id="artistList" class="artist-list"></ul>
        </div>
    </div>


<center><p>Is this page incomplete? Help by submitting info.</p></center>

<script>
    fetch("banddata.json")
        .then(response => response.json())
        .then(bands => {
            const artistList = document.getElementById("artistList");

            // Sort bands alphabetically by name
            bands.sort((a, b) => a.band_name.localeCompare(b.band_name));

            let currentLetter = "";
            
            bands.forEach(band => {
                let firstLetter = band.band_name.charAt(0).toUpperCase();
                
                // Add a letter heading if it's a new letter
                if (firstLetter !== currentLetter) {
                    currentLetter = firstLetter;
                    let letterHeader = document.createElement("h2");
                    letterHeader.id = `letter-${currentLetter}`; // Add ID for scrolling
                    letterHeader.textContent = currentLetter;
                    artistList.appendChild(letterHeader);
                }

                // Create band list item
                let li = document.createElement("li");
                let a = document.createElement("a");
                a.textContent = band.band_name;
                a.href = `band.html?band=${encodeURIComponent(band.band_name)}`;
                li.appendChild(a);
                artistList.appendChild(li);
            });
        })
        .catch(error => console.error("Error loading band data:", error));

    // Function to scroll to letter section
    function scrollToLetter(letter) {
        let section = document.getElementById(`letter-${letter}`);
        if (section) {
            section.scrollIntoView({ behavior: "smooth" });
        }
    }
</script>

<script>
document.getElementById("randomBandButton").addEventListener("click", function () {
    fetch("banddata.json")
        .then(response => response.json())
        .then(bands => {
            if (bands.length === 0) {
                alert("No bands available.");
                return;
            }
            const randomBand = bands[Math.floor(Math.random() * bands.length)];
            window.location.href = `band.html?band=${encodeURIComponent(randomBand.band_name)}`;
        })
        .catch(error => console.error("Error loading band data:", error));
});
</script>

</body>
</html>
