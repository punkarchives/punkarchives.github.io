<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1000, user-scalable=yes">
    <title>Punk Archives</title>
    <style>
        /* Global Styles */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #000000;
            color: #ffffff;
        }

        /* Main flex container */
        .main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-left: 150px; /* Matches sidebar width */
            padding-right: 150px; /* Matches sidebar width */
            padding: 20px;
        }

        /* Left Sidebar */
        .sidebar {
            width: 150px;
            background-color: #121212;
            color: #fff;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding: 20px 5px;
            box-sizing: border-box;
            border-right: 2px solid #660000;
        }

        .sidebar h1 {
            font-family: 'MyCustomFont2', sans-serif;
            color: #660000;
            font-size: 20px;
            text-transform: uppercase;
            margin-bottom: 20px;
            text-align: right;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 15px 0;
        }

        .sidebar ul li a {
            color: #ffffff;
            text-decoration: none;
            font-size: 20px;
            display: block;
            text-align: right;
            padding: 5px;
            transition: background-color 0.2s ease-in-out;
        }

        .sidebar ul li a:hover {
            background-color: #660000;
        }

        /* Right Sidebar */
        .sidebar2 {
            width: 150px;
            background-color: #121212;
            color: #fff;
            height: 100vh;
            position: fixed;
            right: 0;
            top: 0;
            padding: 20px 5px;
            box-sizing: border-box;
            border-left: 2px solid #660000;
        }

        .sidebar2 h1 {
            font-family: 'MyCustomFont2', sans-serif;
            color: #660000;
            font-size: 20px;
            text-transform: uppercase;
            margin-bottom: 20px;
            text-align: left;
        }

        .sidebar2 ul {
            list-style: none;
            padding: 0;
        }

        .sidebar2 ul li {
            margin: 15px 0;
        }

        .sidebar2 ul li a {
            color: #ffffff;
            text-decoration: none;
            font-size: 20px;
            display: block;
            text-align: left;
            padding: 5px;
            transition: background-color 0.2s ease-in-out;
        }

        .sidebar2 ul li a:hover {
            background-color: #660000;
        }

        /* Main Content */
        .content {
            width: 100%;
            max-width: 70%;
            padding: 20px;
        }

        /* Headings */
        .content h1 {
            font-family: 'MyCustomFont2', sans-serif;
            color: #660000;
            font-size: 22px;
            text-transform: uppercase;
            border-bottom: 3px solid #660000;
            padding-bottom: 10px;
        }

        .content h2 {
            font-size: 20px;
            border-bottom: 2px solid #ffffff;
            padding-bottom: 10px;
            color: #660000;
        }

        /* News Items */
        .news-item h3 {
            font-size: 18px;
            color: #660000;
            margin: 10px 0;
        }

        .news-item p {
            line-height: 1.6;
            font-size: 16px;
        }

        /* Custom Fonts */
        @font-face {
            font-family: 'MyCustomFont';
            src: url('Modest.woff') format('woff');
        }
        @font-face {
            font-family: 'MyCustomFont2';
            src: url('Crass.ttf') format('truetype');
        }

        /* Latest Additions Box */
        .latest-additions {
            background-color: #121212;
            border: 2px solid #660000;
            width: 125px;
            color: #ffffff;
        }

        .latest-additions h2 {
            font-size: 18px;
            color: #660000;
        }

        .latest-additions ul {
            list-style: none;
            padding: 0;
            font-size: 14px;
        }

        .latest-additions ul li {
        }
    </style>
</head>
<body>

    <!-- Left Sidebar -->
    <div class="sidebar">
        <h1>Punk Archives</h1>
        <ul>
            <li><a href="index.html#"><font face="MyCustomFont">Home</a></li>
            <li><a href="bands.html#">All Bands</a></li>
            <li><a href="info.html#">Add Info</a></li>
            <li><a href="https://discordapp.com/users/767006494595350578">Contact</a></li>
        <ul>
            <li><a id="randomBandButton">Random Band</font></a></li>
        </ul>
        </ul>
        <h1>Stupid Stuff:</h1>
		<ul>
            <li><a href="bandname.html#"><font face="MyCustomFont">Band Name Generator</a></li>
            <li><a href="straightedge.html#">Straight edge-ifier</a></li>
            <li><a href="madlibs.html#">Punk Mad-Libs</a></li>
            <li><a href="speech.html#">Scott Vogel Speech Generator</a></font></li>
        <ul>
    </div>

<!-- Right Sidebar -->
<div class="sidebar2">
    <div class="search-container">
        <input type="text" id="searchBar" placeholder="Search..." oninput="searchBands()">
        <ul id="searchResults" style="list-style: none; padding: 0; display: none; background: #121212; border: 1px solid #660000; position: absolute; width: 140px; max-height: 200px; overflow-y: auto;"></ul>
    </div><br>
<center>
    <div class="latest-additions">
        <h2>Latest Additions</h2>
        <ul id="latest-additions-list"></ul>
    </div>
</center>

<script>
    fetch('latest_additions.json')
        .then(response => response.json())
        .then(data => {
            let list = document.getElementById("latest-additions-list");
            data.latest_additions.forEach(band => {
                let link = document.createElement("a");
                link.href = band.url;
                link.innerHTML = `<u><font color="#ffffff">${band.name}</font></u>`;
                list.appendChild(link);
                list.appendChild(document.createElement("br"));
                list.appendChild(document.createElement("br"));
            });
        })
        .catch(error => console.error('Error loading latest additions:', error));
</script>

<center>
    <div class="latest-additions">
        <h2>Latest Updates</h2>
        <ul id="latest-updates-list"></ul>
    </div>
</center>

<script>
    fetch('latest_updates.json')
        .then(response => response.json())
        .then(data => {
            let list = document.getElementById("latest-updates-list");
            data.latest_additions.forEach(band => {
                let link = document.createElement("a");
                link.href = band.url;
                link.innerHTML = `<u><font color="#ffffff">${band.name}</font></u>`;
                list.appendChild(link);
                list.appendChild(document.createElement("br"));
                list.appendChild(document.createElement("br"));
            });
        })
        .catch(error => console.error('Error loading latest updates:', error));
</script>

<br>
<center>
  <div class="latest-additions">
    <h2>Top Users</h2>
    <ul id="top-users-list"></ul>
  </div>
</center>

<script>
  fetch('users.json')
    .then(response => response.json())
    .then(users => {
      // Sort users by score in descending order
      users.sort((a, b) => b.score - a.score);

      // Select the top 5 users
      const topUsers = users.slice(0, 5);

      // Get the list element
      const list = document.getElementById("top-users-list");

      // Populate the list
      topUsers.forEach(user => {
        const listItem = document.createElement("li");
        listItem.textContent = `${user.username}: ${user.score}`;
        list.appendChild(listItem);
      });
    })
    .catch(error => console.error("Error loading users:", error));
</script>

</div>

<script>
const DEBUG = true; // Set to true for debugging

function searchBands() {
    const query = document.getElementById("searchBar").value.toLowerCase();
    const resultsList = document.getElementById("searchResults");

    if (query.length === 0) {
        resultsList.style.display = "none";
        return;
    }

    fetch("banddata.json")
        .then(response => response.json())
        .then(bands => {
            resultsList.innerHTML = "";
            let matches = [];

            bands.forEach(band => {
                let matchText = "";
                let priority = Infinity; // Lower is better

                function updatePriority(field, text) {
                    if (typeof field === "string") {
                        let pos = field.toLowerCase().indexOf(query);
                        if (pos !== -1 && pos < priority) {
                            priority = pos;
                            matchText = text;
                        }
                    }
                }

                updatePriority(band.band_name, `Band Name: ${band.band_name}`);
                updatePriority(band.location, `Location: ${band.location}`);

                if (Array.isArray(band.genre)) {
                    for (let g of band.genre) {
                        updatePriority(g, `Genre: ${band.genre.join(", ")}`);
                    }
                }

                if (Array.isArray(band.releases)) {
    for (let release of band.releases) {
        if (release.title) updatePriority(release.title, `Release: ${release.title}`);
        if (release.label) updatePriority(release.label, `Label: ${release.label}`);
    }
}

                if (priority !== Infinity) {
                    matches.push({ band, matchText, priority });
                }
            });

            // **Sort by priority (lower index appears first)**
            matches.sort((a, b) => a.priority - b.priority);

            if (matches.length === 0) {
                resultsList.innerHTML = "<li style='color: #888; padding: 5px;'>No results</li>";
            } else {
                matches.forEach(({ band, matchText }) => {
                    let li = document.createElement("li");
                    li.style.padding = "5px";
                    li.style.cursor = "pointer";
                    li.style.color = "#ffffff";

                    li.innerHTML = `<strong>Band:</strong> ${band.band_name}`;
                    if (matchText) {
                        li.innerHTML += `<br><span style="color: #888; font-size: 14px;">${matchText}</span>`;
                    }

                    li.onclick = function() {
                        window.location.href = `band.html?band=${encodeURIComponent(band.band_name)}`;
                    };

                    resultsList.appendChild(li);
                });
            }

            resultsList.style.display = "block";
        })
        .catch(error => console.error("Error loading band data:", error));
}
</script>


<!-- Main Container -->
    <div class="main-container">
        <div class="content">
            <h1>Submission FAQ:</h1>
<h2>"Is ___ Accepted?":</h2>
<p><font size="4" face="Verdana"><u>The band must have been musically punk at some point</u>. Yes, pop punk, folk punk, and even later waves of emo are included in this. If you still aren't sure, submitting a real band that isn't accepted has no risk of losing points. Lesser known bands are preferred over everything else though.</font></p>
<h2>"What if I don't know everything?":</h2>
<p><font size="4" face="Verdana">No matter how little of info you have on a band, submit it anyways. You can submit as many forms as you want, and it won't inconvenience me. If you think you know something but aren't fully sure of it, include it anyways but clarify that it's a guess.</font></p>
<center>
  <div class="scoring-system">
    <h2>Scoring System</h2>
<p>Accuracy Gives Higher Scores</p>
    <table border="1">
      <thead>
        <tr>
          <th>Category</th>
          <th>Points</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Band Name</td>
          <td>1 Total</td>
        </tr>
        <tr>
          <td>Years Active</td>
          <td>2 Total</td>
        </tr>
        <tr>
          <td>Genres</td>
          <td>2 Total</td>
        </tr>
        <tr>
          <td>Location</td>
          <td>1-3 Total</td>
        </tr>
        <tr>
          <td>Related Bands</td>
          <td>1 Each (Max 3)</td>
        </tr>
        <tr>
          <td>Official Links</td>
          <td>1 Each (Max 5)</td>
        </tr>
        <tr>
          <td>Members</td>
          <td>1-4 Each</td>
        </tr>
        <tr>
          <td>Releases</td>
          <td>1-10 Each</td>
        </tr>
      </tbody>
    </table>
  </div>
</center>



            <center><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdOuLl9jYT6HH6FHLX444HS8nlUo7-3cKaQTIlMTDfbmWBlJA/viewform?embedded=true" width="640" height="1429" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe></center>
<center><h1>All Users</h1></center>
<ul id="all-users-list"></ul>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
<div class="content">
    </div>
</div>


<script>
document.getElementById("randomBandButton").addEventListener("click", function () {
    fetch("banddata.json")
        .then(response => response.json())
        .then(bands => {
            if (bands.length === 0) {
                alert("No bands available.");
                return;
            }
            const randomBand = bands[Math.floor(Math.random() * bands.length)];
            window.location.href = `band.html?band=${encodeURIComponent(randomBand.band_name)}`;
        })
        .catch(error => console.error("Error loading band data:", error));
});
</script>
<script>
  fetch('users.json')
    .then(response => response.json())
    .then(users => {
      // Sort users alphabetically by username
      users.sort((a, b) => a.username.localeCompare(b.username));

      // Get the list element
      const list = document.getElementById("all-users-list");

      // Populate the list
      users.forEach(user => {
        const listItem = document.createElement("li");
        listItem.textContent = `${user.username}: ${user.score}`;
        list.appendChild(listItem);
      });
    })
    .catch(error => console.error("Error loading users:", error));
</script>

</body>
</html>
